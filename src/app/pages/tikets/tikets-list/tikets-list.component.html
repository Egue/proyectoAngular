<p-toast></p-toast>
<div class="row">
    <div class="col-md-12">
        <div class="card">
            <div class="card-body">
                <div class="row m-t-40">
                    <!-- Column -->
                    <div class="col-md-6 col-lg-3 col-xlg-3">
                        <div class="card">
                            <div class="box bg-info text-center">
                                <h1 class="font-light text-white">2,064</h1>
                                <h6 class="text-white">Total Tickets</h6>
                            </div>
                        </div>
                    </div>
                    <!-- Column -->
                    <div class="col-md-6 col-lg-3 col-xlg-3">
                        <div class="card">
                            <div class="box bg-primary text-center">
                                <h1 class="font-light text-white">1,738</h1>
                                <h6 class="text-white">Responded</h6>
                            </div>
                        </div>
                    </div>
                    <!-- Column -->
                    <div class="col-md-6 col-lg-3 col-xlg-3">
                        <div class="card">
                            <div class="box bg-success text-center">
                                <h1 class="font-light text-white">1100</h1>
                                <h6 class="text-white">Resolve</h6>
                            </div>
                        </div>
                    </div>
                    <!-- Column -->
                    <div class="col-md-6 col-lg-3 col-xlg-3">
                        <div class="card">
                            <div class="box bg-dark text-center">
                                <h1 class="font-light text-white">964</h1>
                                <h6 class="text-white">Pending</h6>
                            </div>
                        </div>
                    </div>
                    <!-- Column -->
                </div>
            </div>
        </div>
    </div>
</div>


<div class="row">
    <div class="col-md-12">
        <div class="card">
            <div class="card-body">
                <p-toolbar styleClass="mb-4">
                    <ng-template pTemplate="left">
                        <button pButton pRipple  icon="pi pi-book" class="p-button-success mr-2" (click)="openDialogCategoria()"></button> 
                    </ng-template>
                    <ng-template pTemplate="right">
                        <button pButton pRipple  icon="pi pi-slack" class="p-button-warning mr-2" (click)="openDialogTicket()"></button> 
                    </ng-template>
            
                   
                </p-toolbar>

                <p-table #dtlistPermiso 
                [value]="tikects"  
                [rows]="10"  
                [paginator]="true" 
                responsiveLayout="stack"
                currentPageReportTemplate="Mostrando {first} de {last} de {totalRecords} registros" 
                [showCurrentPageReport]="true">
                <ng-template pTemplate="header">
                    <tr>
                        <th># Ticket</th>
                        <th>Categoria</th>
                        <th>Titulo</th>
                        <th>Fecha</th>
                        <th></th>
                    </tr>
                </ng-template>
                <ng-template pTemplate="body" let-ticket>
                    <tr>
                        <td><span class="p-column-title"><strong># Ticket</strong></span>#{{ticket.id}}</td>
                        <td><span class="p-column-title"><strong>Categoria</strong></span>{{ticket.name}}</td>
                        <td><span class="p-column-title"><strong>Titulo</strong></span>{{ticket.titulo}}</td>
                        <td><span class="p-column-title"><strong>Fecha de creaci√≥n</strong></span>{{ticket.fecha}}</td>
                        <td>
                            <button pButton pRipple icon="pi pi-pencil" class="p-button-rounded p-button-success mr-2"  [routerLink]="['/dashboard/tickets' , ticket.id!, 'edit']"></button>
                        </td>
                    </tr>
                </ng-template>
                
                
                
            </p-table>

            </div>
        </div>
    </div>
</div>










<p-dialog [(visible)]="dialogCategoria" [style]="{width: '450px'}" header="Crear Categoria" [modal]="true" styleClass="p-fluid">
    <ng-template pTemplate="content">
        <form [formGroup]="formCategoria" (submit)="validation()"> 
         <div class="field">
            <label for="name">Categorias</label>
            <input type="text" pInputText     required autofocus  formControlName="name"/>
            <!--<small class="p-error" *ngIf="submitted && !product.name">Name is required.</small>-->
        </div>
        
        

          
        <button pButton pRipple label="Save" icon="pi pi-check" class="p-button-text"  [disabled]="this.formCategoria.invalid"></button>
         </form>
    </ng-template>
 
</p-dialog>



<p-dialog [(visible)]="dialogTicket" [style]="{width: '450px'}" header="Crear Ticket" [modal]="true" styleClass="p-fluid">
    <ng-template pTemplate="content">
        <form [formGroup]="formTicket" (submit)="validationTicket()"> 
         <div class="field">
            <label for="titulo">Titulo</label>
            <input type="text" pInputText     required autofocus  formControlName="titulo"/>
            <!--<small class="p-error" *ngIf="submitted && !product.name">Name is required.</small>-->
        </div>
        <div class="field">
            <label for="categoria">Categoria</label>
            <p-dropdown [options]="listCategoria" optionLabel="name" optionValue="id" formControlName="id_categoria" [showClear]="true" placeholder="Seleccione Categoria"></p-dropdown>
        </div>
        <div class="field">
            <label for="comentario">Comentario</label>
            <textarea id="comentario" pInputTextarea  formControlName="comentario" rows="3" cols="20"></textarea>
        </div>
        

          
        <button pButton pRipple label="Save" icon="pi pi-check" class="p-button-text"  [disabled]="this.formTicket.invalid"></button>
         </form>
    </ng-template>
 
</p-dialog>

